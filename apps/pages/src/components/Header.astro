---
import { Image } from "astro:assets";
import label from "../assets/images/common/oucrc-label-black.png";
import logo from "../assets/images/common/oucrc-logo.png";
import close from "../assets/images/header/close.svg";
import hamburger from "../assets/images/header/hamburger.svg";
---

<header>
  <div
    class="bg-white text-lg flex flex-row h-16 justify-between opacity-90 px-3 shadow-md fixed w-full z-50"
  >
    <!-- ロゴ -->
    <a href="/" class="m-2 flex flex-row items-center">
      <Image
        src={logo}
        alt="ロゴ"
        width={40}
        height={40}
        class="h-10 hidden md:block mr-2"
      />
      <Image
        src={label}
        alt="岡山大学電子計算機研究会"
        width={238}
        height={32}
        class="h-8"
      />
    </a>

    <!-- PC ナビゲーション -->
    <div class="hidden md:flex flex-grow justify-end">
      <nav id="navigation" class="self-center h-full">
        <a href="/" class="border-b-2 border-white hover:border-divider">
          ホーム
        </a>
        <a
          href="/articles"
          class="border-b-2 border-white hover:border-divider"
        >
          作品紹介
        </a>
        <a href="/members" class="border-b-2 border-white hover:border-divider">
          部員紹介
        </a>
        <a href="/join" class="border-b-2 border-white hover:border-divider">
          入部フォーム
        </a>
      </nav>
    </div>

    <!-- スマホ ハンバーガーメニュー -->
    <div class="h-auto flex flex-row">
      <button id="hamburger-btn" class="focus:outline-none" type="button">
        <Image
          id="hamburger-icon"
          src={hamburger}
          alt="メニュー"
          width={18}
          height={18}
          class="m-2 block md:hidden"
        />
        <Image
          id="close-icon"
          src={close}
          alt="キャンセル"
          width={18}
          height={18}
          class="m-2 md:hidden hidden"
        />
        <span class="hamburger">ハンバーガーメニュー</span>
      </button>
    </div>
  </div>

  <div id="mobile-nav" class="navbar fixed text-center text-xl z-40 hidden">
    <!-- スマホ ナビゲーション -->
    <nav class="self-center h-full">
      <div class="py-5">
        <a href="/" class="border-b-2 border-white hover:border-divider">
          ホーム
        </a>
      </div>
      <div class="py-5">
        <a
          href="/articles"
          class="border-b-2 border-white hover:border-divider"
        >
          作品紹介
        </a>
      </div>
      <div class="py-5">
        <a href="/members" class="border-b-2 border-white hover:border-divider">
          部員紹介
        </a>
      </div>
      <div class="py-5">
        <a href="/join" class="border-b-2 border-white hover:border-divider">
          入部フォーム
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  const hamburgerBtn = document.getElementById("hamburger-btn");
  const hamburgerIcon = document.getElementById("hamburger-icon");
  const closeIcon = document.getElementById("close-icon");
  const mobileNav = document.getElementById("mobile-nav");

  hamburgerBtn?.addEventListener("click", () => {
    const isOpen = !mobileNav?.classList.contains("hidden");

    if (isOpen) {
      mobileNav?.classList.add("hidden");
      hamburgerIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    } else {
      mobileNav?.classList.remove("hidden");
      hamburgerIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    }
  });

  // モバイルナビのリンクをクリックしたときにメニューを閉じる
  const mobileNavLinks = mobileNav?.querySelectorAll("a");
  mobileNavLinks?.forEach((link) => {
    link.addEventListener("click", () => {
      mobileNav?.classList.add("hidden");
      hamburgerIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    });
  });
</script>

<style>
  #navigation > * {
    height: 100%;
    display: inline-block;
    margin-right: 1rem;
    padding-top: 1.25rem;
    font-size: 0.875rem;
    color: var(--color-primary, #3b82f6);
    transition: all 0.3s ease-in-out;
  }

  #navigation > .active {
    border-bottom: 2px solid var(--color-primary, #3b82f6);
  }

  .navbar {
    background-color: white;
    font-weight: bold;
    width: 100%;
    height: 100%;
    padding-top: 16rem;
    padding-bottom: 16rem;
    top: 0;
    left: 0;
    opacity: 0.9;
  }

  .hamburger {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
</style>
